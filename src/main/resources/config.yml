# ═══════════════════════════════════════════════════════════════════
#           ServerBackupPlugin Configuration v2.0
# ═══════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════
#                    CORE BACKUP SETTINGS
# ═══════════════════════════════════════════════════════════════════
backup:
  # Directory where backups will be stored (relative to server root)
  directory: "backups"
  
  # Enable automatic backups (disabled by default, operator must use /backup command)
  auto-backup-enabled: false
  
  # Automatic backup interval in minutes (default: 720 = 12 hours, twice daily)
  auto-backup-interval: 720
  
  # Default backup type: 'world' (worlds only) or 'full' (worlds + plugins)
  default-backup-type: "world"
  
  # Maximum number of backups to keep (0 = unlimited)
  max-backups: 10
  
  # Compress backups (zip format)
  compress: true
  
  # Worlds to backup (leave empty to backup all worlds)
  worlds:
    - "world"
    - "world_nether"
    - "world_the_end"
  
  # Include plugins folder in backup
  include-plugins: false
  
  # Broadcast messages to all players
  broadcast-messages: true

# ═══════════════════════════════════════════════════════════════════
#                    FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════
features:
  # Enable public API for other plugins
  # When enabled, other plugins can use BackupAPI to create/manage backups
  public-api:
    enabled: true
    
  # Enable event system
  # When enabled, fires Bukkit events (BackupStartEvent, BackupCompleteEvent, etc.)
  # Disable this if you don't want other plugins listening to backup events
  events:
    enabled: true
    fire-start-event: true
    fire-complete-event: true
    fire-fail-event: true
    fire-delete-event: true
    
  # HTTP REST API for web panels (EXPERIMENTAL)
  # Allows external tools to manage backups via HTTP endpoints
  http-api:
    enabled: false
    port: 8080
    host: "127.0.0.1"  # SECURITY: Use localhost only, or configure firewall!
    auth:
      enabled: true
      token: "CHANGE_ME_RANDOM_TOKEN_HERE"  # IMPORTANT: Change this!
    cors:
      enabled: false
      allowed-origins: ["http://localhost:3000"]
      
  # Region-based snapshots (requires WorldGuard)
  region-snapshots:
    enabled: false
    default-format: "zip"  # zip or folder
    
  # Cloud sync integration
  cloud-sync:
    enabled: false
    # Upload backups to cloud storage after creation
    auto-upload: true
    # Delete local backup after successful upload
    delete-after-upload: false

# ═══════════════════════════════════════════════════════════════════
#                    PLUGIN INTEGRATIONS
# ═══════════════════════════════════════════════════════════════════
integrations:
  # CoreProtect integration for smart rollbacks
  coreprotect:
    enabled: false
    # If rollback affects more than this many blocks, suggest full restore
    auto-restore-threshold: 10000
    # Automatically create backup before large rollbacks
    backup-before-rollback: true
    
  # WorldGuard integration for region snapshots
  worldguard:
    enabled: false
    # Allow region-specific backups
    region-backups: true
    
  # LuckPerms integration for advanced permissions
  luckperms:
    enabled: false
    # Group-based rate limiting (backups per hour)
    rate-limits:
      admin: 0  # unlimited
      mod: 5
      default: 1
      
  # PlaceholderAPI integration
  placeholderapi:
    enabled: false
    # Provides placeholders like %serverbackup_last_backup_time%
    
  # BungeeCord/Velocity network mode
  network:
    enabled: false
    mode: "velocity"  # "bungee" or "velocity"
    # Network backup coordinator
    coordinator:
      # Is this server the coordinator? (usually proxy)
      is-coordinator: false
      # Channel name for plugin messaging
      channel: "serverbackup:network"
      
  # Discord webhooks for notifications
  discord:
    enabled: false
    webhook-url: ""
    notify-on-success: true
    notify-on-failure: true
    notify-on-start: false
    
  # Cloud storage providers
  cloud-providers:
    # Amazon S3 / Backblaze B2 / MinIO
    s3:
      enabled: false
      endpoint: "s3.amazonaws.com"
      region: "us-east-1"
      bucket: "my-minecraft-backups"
      access-key: ""
      secret-key: ""
      path-prefix: "server1/"
      
    # FTP/SFTP
    ftp:
      enabled: false
      protocol: "sftp"  # ftp or sftp
      host: "ftp.example.com"
      port: 22
      username: ""
      password: ""
      remote-path: "/backups"
      
    # Google Drive (requires OAuth setup)
    google-drive:
      enabled: false
      credentials-file: "plugins/ServerBackupPlugin/google-credentials.json"
      folder-id: ""

# ═══════════════════════════════════════════════════════════════════
#                    PERFORMANCE SETTINGS
# ═══════════════════════════════════════════════════════════════════
performance:
  # Thread pool size for async operations
  async-threads: 2
  
  # Chunk-based world saving (reduces lag)
  chunk-based-save: true
  chunks-per-tick: 20
  
  # Pause auto-save during backup (prevents corruption)
  pause-auto-save: true

# Messages
messages:
  backup-started: "&aBackup started... Type: {type}"
  backup-completed: "&aBackup completed successfully! File: {filename} Type: {type}"
  backup-failed: "&cBackup failed: {error}"
  backup-deleted: "&aBackup deleted: {filename}"
  backup-restored: "&aBackup restored: {filename}"
  no-permission: "&cYou don't have permission to use this command."
  invalid-backup: "&cInvalid backup name."
  list-header: "&a=== Server Backups ==="
  list-entry: "&7- &e{filename} &7({size}, {date})"
  no-backups: "&7No backups found."
